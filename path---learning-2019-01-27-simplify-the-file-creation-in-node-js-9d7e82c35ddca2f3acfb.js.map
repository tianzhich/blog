{"version":3,"sources":["webpack:///path---learning-2019-01-27-simplify-the-file-creation-in-node-js-9d7e82c35ddca2f3acfb.js","webpack:///./.cache/json/learning-2019-01-27-simplify-the-file-creation-in-node-js.json"],"names":["webpackJsonp","287","module","exports","data","markdownRemark","html","frontmatter","title","date","excerpt","contents","text","subContents","pathContext","slug"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAAo22CC,aAAmuDC,MAAA,mBAAAC,KAAA,mBAAAC,QAAA,iGAAAC,WAA6KC,KAAA,KAAAC,YAAA,OAAiCD,KAAA,UAAAC,YAAA,OAAsCD,KAAA,UAAAC,cAAiCD,KAAA,SAAgBA,KAAA,mBAA0BA,KAAA,eAAsBA,KAAA,YAAmBA,KAAA,oBAA2BA,KAAA,KAAAC,cAA4BD,KAAA,UAAiBA,KAAA,qBAA4BA,KAAA,KAAAC,YAAA,UAAmCC,aAAgBC,KAAA","file":"path---learning-2019-01-27-simplify-the-file-creation-in-node-js-9d7e82c35ddca2f3acfb.js","sourcesContent":["webpackJsonp([236278375703133],{\n\n/***/ 287:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"背景\\\"><a href=\\\"#%E8%83%8C%E6%99%AF\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>背景</h2>\\n<p>最近搭建毕设前端框架的时候，每当创建一个页面，我都需要创建这个页面组件，创建它的Route，最后将该Route加入到总的Route。当然，这里的流程还不算复杂，基本也是复制粘贴改改变量，但是后面还要用到Redux，可能还会使用saga…再将它们加入这一条流程线，我需要改的东西又多了</p>\\n<p>在公司实习的脚手架里，发现有大佬造的轮子，之前也只是照着命令敲拿来用，这次顺带研究了一下核心功能，结合我的毕设框架需要，加入了最简单的自动化“脚本”。可能是我的搜索方式有问题，没在网上找到类似的，也因此把它记录下来📝</p>\\n<h2 id=\\\"所需环境和工具\\\"><a href=\\\"#%E6%89%80%E9%9C%80%E7%8E%AF%E5%A2%83%E5%92%8C%E5%B7%A5%E5%85%B7\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>所需环境和工具</h2>\\n<ol>\\n<li>\\n<p>Node环境下执行</p>\\n</li>\\n<li>\\n<p>命令映射，使用<a href=\\\"https://github.com/tj/commander.js\\\">commander</a></p>\\n<blockquote>\\n<p>让文件可以通过命令行的形式执行</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>文件读写，这里我使用的是<a href=\\\"https://github.com/jprichardson/node-fs-extra\\\">fs-extra</a>，使用Node自带的<a href=\\\"https://nodejs.org/api/fs.html\\\">File System</a>，但是前者支持Promise和Async, Await</p>\\n<blockquote>\\n<p>文件读写只是读取模板文件内容，然后写入到新的文件为我们所用</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>模板字符串，使用lodash/string的模板字符串方法<a href=\\\"https://lodash.com/docs/4.17.10#template\\\">template</a></p>\\n<blockquote>\\n<p>模板字符串：我们可以使用xxx.tmpl格式的文件存储我们的模板，需要替换的内容使用</p>\\n<p><code class=\\\"language-text\\\">&lt;%= xxx %&gt;</code>表示即可，下面会给出文件原型</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>文件修改，使用<a href=\\\"https://github.com/dsherret/ts-simple-ast\\\">ts-simple-ast</a></p>\\n<blockquote>\\n<p>文件修改则是直接修改原来文件，加入自己所需的东西，例如修改变量值，这也是这篇文章中提到的较为简单的一个用途，其他更复杂的也可以参考文档学习</p>\\n</blockquote>\\n</li>\\n</ol>\\n<h2 id=\\\"文件原型和需求\\\"><a href=\\\"#%E6%96%87%E4%BB%B6%E5%8E%9F%E5%9E%8B%E5%92%8C%E9%9C%80%E6%B1%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>文件原型和需求</h2>\\n<h3 id=\\\"0-需求\\\"><a href=\\\"#0-%E9%9C%80%E6%B1%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>0. 需求</h3>\\n<p>每当新增一个页面，我们需要创建一个基本框架组件，一个Route，最后把这个Route自动插入到总的Router里</p>\\n<h3 id=\\\"1-xxxcomponent\\\"><a href=\\\"#1-xxxcomponent\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>1. xxxComponent</h3>\\n<p>这里创建了一个非常简单的组件，带有Props和State，interface使用Ixxx命名</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\">\\n      <pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> React <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>State <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>State<span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">constructor</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">super</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>state <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h2</span><span class=\\\"token punctuation\\\">></span></span>My Home<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h2</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<h3 id=\\\"2-xxxindex\\\"><a href=\\\"#2-xxxindex\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>2. xxx.index</h3>\\n<p>这个文件里加入所有需要导出的Component，并作为统一导出出口</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">export</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./&lt;%= featureUpperName %>'</span></code></pre>\\n      </div>\\n<h3 id=\\\"3-route\\\"><a href=\\\"#3-route\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>3. Route</h3>\\n<p>自定义的Route，属性也基本遵循原生Route，加入loadable component，支持按需加载</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> App <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../common/component/App'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> IRoute <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@src/common/routeConfig'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">loader</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">async</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> entrance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> <span class=\\\"token keyword\\\">import</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> entrance<span class=\\\"token punctuation\\\">[</span>name<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> childRoutes<span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/&lt;%= featureName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'&lt;%= featureUpperName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    loader<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">loader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'&lt;%= featureUpperName %>'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/&lt;%= featureName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">,</span>\\n    component<span class=\\\"token punctuation\\\">:</span> App<span class=\\\"token punctuation\\\">,</span>\\n    childRoutes\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><strong>上面三个便作为基本模板文件，下面这个则是总的Route</strong></p>\\n<h3 id=\\\"4-routeconfig\\\"><a href=\\\"#4-routeconfig\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>4. routeConfig</h3>\\n<blockquote>\\n<p>完成一个页面的创建并生成它的route后，需要在该文件引入这个route，然后修改变量childRoutes，插入该route，这样我们的工作就算完成啦</p>\\n</blockquote>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> HomeRoute <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"../features/home/route\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">IRoute</span> <span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n    component<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> React<span class=\\\"token punctuation\\\">.</span>ComponentClass <span class=\\\"token operator\\\">|</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">SFC</span><span class=\\\"token punctuation\\\">;</span>\\n    childRoutes<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span>\\n    loader<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> AsyncComponentLoader\\n    exact<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">boolean</span>\\n    redirect<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">const</span> childRoutes<span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>HomeRoute<span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">const</span> routes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'app'</span><span class=\\\"token punctuation\\\">,</span>\\n    exact<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n    redirect<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/home'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token operator\\\">...</span>childRoutes<span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> routes<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2 id=\\\"步骤\\\"><a href=\\\"#%E6%AD%A5%E9%AA%A4\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>步骤</h2>\\n<h3 id=\\\"零、源代码\\\"><a href=\\\"#%E9%9B%B6%E3%80%81%E6%BA%90%E4%BB%A3%E7%A0%81\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>零、源代码</h3>\\n<h4 id=\\\"1-kitjs\\\"><a href=\\\"#1-kitjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>1. kit.js</h4>\\n<p><strong>用于读取模板文件，写入新的文件</strong></p>\\n<p>首先第一行，告诉shell此文件默认执行环境为Node</p>\\n<p>接下来我们来看addFeatureItem(忽略我的命名╮(╯▽╰)╭)，这个函数有三个参数</p>\\n<ul>\\n<li>srcPath，template文件位置</li>\\n<li>targetPath，写入的文件位置</li>\\n<li>option，渲染模板时使用，简而言之可以替换掉模板中的变量为里面我们设定的值</li>\\n</ul>\\n<p>我们先确认文件是否存在，然后读取模板文件，写入新的文件即可，中间加了个已有文件判断</p>\\n<p>是不是很简单！</p>\\n<p>最后加入使用commander创建自己的命令即可，更详细的用法可以查看commander的<a href=\\\"https://github.com/tj/commander.js\\\">文档</a>，这里添加一个简单的add命令，后跟一个featureName，键入命令后执行action函数，里面的参数即我们刚刚键入的featureName，读取后便可以从模板创建新的feature</p>\\n<p>当然，我们还需要修改routeConfig.ts这个文件，我将这个操作放到了下面的ts-ast.ts文件</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">#<span class=\\\"token operator\\\">!</span> <span class=\\\"token operator\\\">/</span>usr<span class=\\\"token operator\\\">/</span>bin<span class=\\\"token operator\\\">/</span>env node\\n\\n<span class=\\\"token keyword\\\">const</span> fse <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs-extra'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> _ <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/string'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> commander <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'commander'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> ast <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./ts-ast'</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token keyword\\\">const</span> templatesDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'templates'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> targetDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'..'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'src'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'features'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">,</span> targetPath<span class=\\\"token punctuation\\\">,</span> option<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">let</span> res<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ensureFile</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">)</span>\\n        res <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span>\\n        \\n        <span class=\\\"token comment\\\">// avoid override</span>\\n        <span class=\\\"token keyword\\\">const</span> exists <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">pathExists</span><span class=\\\"token punctuation\\\">(</span>targetPath<span class=\\\"token punctuation\\\">)</span>\\n        <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>exists<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetPath<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\"> is already added!`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">return</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">outputFile</span><span class=\\\"token punctuation\\\">(</span>targetPath<span class=\\\"token punctuation\\\">,</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">template</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span>option<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            encoding<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"utf-8\\\"</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`Add </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>srcPath<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\"> success!`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">err</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">error</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addFeature</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> renderOpt <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n        featureName<span class=\\\"token punctuation\\\">:</span> name<span class=\\\"token punctuation\\\">,</span>\\n        featureUpperName<span class=\\\"token punctuation\\\">:</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> componentTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/Component.tsx.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> component <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>_<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">.tsx`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>componentTmpl<span class=\\\"token punctuation\\\">,</span> component<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> indexTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/index.ts.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> index <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/index.ts`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>indexTmpl<span class=\\\"token punctuation\\\">,</span> index<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> routeTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route.ts.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> route <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route.ts`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>routeTmpl<span class=\\\"token punctuation\\\">,</span> route<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\ncommander\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">version</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'../package.json'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>version<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">command</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'add &lt;feature>'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">action</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// add features</span>\\n        <span class=\\\"token function\\\">addFeature</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// manipulate some ts file like route</span>\\n        <span class=\\\"token function\\\">ast</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n\\ncommander<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>process<span class=\\\"token punctuation\\\">.</span>argv<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h4 id=\\\"2-ts-astjs\\\"><a href=\\\"#2-ts-astjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>2. ts-ast.js</h4>\\n<p><strong>用于修改rootConfig.ts文件</strong></p>\\n<p>先给出ts-simple-ast的<a href=\\\"https://github.com/dsherret/ts-simple-ast\\\">地址</a>，自己还是觉得这个操作是比较复杂的，我也是参考了文档再加上项目脚手架代码才看明白，至于原理性的东西，可能还需要查看<a href=\\\"https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API\\\">Typescript Compiler API</a>，因为这个包也只是Wrapper，文档也还不是很完善，更复杂的需求还有待学习</p>\\n<p>这里关键就两个操作，一个是添加一个import，其次则是修改childRoutes变量的值。但是一些函数的英文字面意思理解起来可能比上面的文件读写要困难</p>\\n<ol>\\n<li>我们首先需要新建一个Project</li>\\n<li>然后需要获取待操作的文件，拿到待操作文件(srcFile)之后，直接使用<em>addImportDeclaration</em>这个方法便可以添加default import，如果需要named import，也可以使用addNamedImport。定义好default name(defaultImport prop)以及path(moduleSpecifier)即可</li>\\n<li>\\n<p>最后是对childRoutes变量的值进行修改，这一过程比较复杂</p>\\n<ul>\\n<li>我们首先需要通过变量名拿到一个VariableStatement</li>\\n<li>然后再拿到变量声明（VariableDeclaration），因为一个文件中可能有多处声明（函数中，全局中）</li>\\n<li>由于该例中只有一处声明，所以我们直接forEach遍历声明即可，遍历时拿到initializer（这里是一个类似array的东东）</li>\\n<li>再使用它的forEachChild遍历拿到node，node.getText终于拿到了里面的一个值（比如HomeRoute）</li>\\n<li>我们将这些值添加到一个新的数组</li>\\n<li>直到遍历完毕，再将它们拼接起来，加入新的route，以字符串形式setInitializer即可</li>\\n</ul>\\n</li>\\n<li>最后保存所有操作，Project.save()即可</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> Project <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'ts-simple-ast'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> _ <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/string'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token keyword\\\">const</span> project <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Project</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> srcDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'..'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'src'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'common'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addRoute</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> FeatureName <span class=\\\"token operator\\\">=</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> srcFile <span class=\\\"token operator\\\">=</span> project<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addExistingSourceFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>srcDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/routeConfig.ts`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    srcFile<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addImportDeclaration</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      defaultImport<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>FeatureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">Route`</span></span><span class=\\\"token punctuation\\\">,</span>\\n      moduleSpecifier<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`../features/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>featureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route`</span></span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token keyword\\\">const</span> routeVar <span class=\\\"token operator\\\">=</span> srcFile<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getVariableStatementOrThrow</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'childRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">let</span> newRoutes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    routeVar<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getDeclarations</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>decl<span class=\\\"token punctuation\\\">,</span> i<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n      decl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getInitializer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">forEachChild</span><span class=\\\"token punctuation\\\">(</span>node <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        newRoutes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span>node<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getText</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n      decl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setInitializer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`[</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>newRoutes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">', '</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">, </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>FeatureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">Route]`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n\\n    <span class=\\\"token keyword\\\">await</span> project<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">save</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Add route successful\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  \\n<span class=\\\"token punctuation\\\">}</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> addRoute<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h3 id=\\\"一、修改文件权限，使其可执行\\\"><a href=\\\"#%E4%B8%80%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%EF%BC%8C%E4%BD%BF%E5%85%B6%E5%8F%AF%E6%89%A7%E8%A1%8C\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>一、修改文件权限，使其可执行</h3>\\n<p>只要头部加入了<code class=\\\"language-text\\\">#! /usr/bin/env node</code>，简单的一行命令即可搞定<code class=\\\"language-text\\\">chmod +x /filePath/yourExeFile</code></p>\\n<p>然后，我们便可以使用<code class=\\\"language-text\\\">/filePath/yourExeFile add featureName</code>的方式添加一个新的页面！</p>\\n<h2 id=\\\"参考\\\"><a href=\\\"#%E5%8F%82%E8%80%83\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>参考</h2>\\n<ol>\\n<li><a href=\\\"https://askubuntu.com/questions/443789/what-does-chmod-x-filename-do-and-how-do-i-use-it/443799\\\">what-does-chmod-x-filename-do-and-how-do-i-use-it</a></li>\\n</ol>\",\"frontmatter\":{\"title\":\"使用Node工具简化文件创建流程\",\"date\":\"January 27, 2019\",\"excerpt\":\"React中创建组件，添加Redux，添加Route，(或者还需要添加saga)，最后在全局Route和Redux中加入它们，这一系列重复的过程，都可以在Node中创建'脚本'来自动化执行\",\"contents\":[{\"text\":\"背景\",\"subContents\":null},{\"text\":\"所需环境和工具\",\"subContents\":null},{\"text\":\"文件原型和需求\",\"subContents\":[{\"text\":\"0-需求\"},{\"text\":\"1-xxxcomponent\"},{\"text\":\"2-xxxindex\"},{\"text\":\"3-route\"},{\"text\":\"4-routeconfig\"}]},{\"text\":\"步骤\",\"subContents\":[{\"text\":\"零、源代码\"},{\"text\":\"一、修改文件权限，使其可执行\"}]},{\"text\":\"参考\",\"subContents\":null}]}}},\"pathContext\":{\"slug\":\"/learning/2019/01/27/Simplify-the-File-Creation-in-NodeJS/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---learning-2019-01-27-simplify-the-file-creation-in-node-js-9d7e82c35ddca2f3acfb.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"背景\\\"><a href=\\\"#%E8%83%8C%E6%99%AF\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>背景</h2>\\n<p>最近搭建毕设前端框架的时候，每当创建一个页面，我都需要创建这个页面组件，创建它的Route，最后将该Route加入到总的Route。当然，这里的流程还不算复杂，基本也是复制粘贴改改变量，但是后面还要用到Redux，可能还会使用saga…再将它们加入这一条流程线，我需要改的东西又多了</p>\\n<p>在公司实习的脚手架里，发现有大佬造的轮子，之前也只是照着命令敲拿来用，这次顺带研究了一下核心功能，结合我的毕设框架需要，加入了最简单的自动化“脚本”。可能是我的搜索方式有问题，没在网上找到类似的，也因此把它记录下来📝</p>\\n<h2 id=\\\"所需环境和工具\\\"><a href=\\\"#%E6%89%80%E9%9C%80%E7%8E%AF%E5%A2%83%E5%92%8C%E5%B7%A5%E5%85%B7\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>所需环境和工具</h2>\\n<ol>\\n<li>\\n<p>Node环境下执行</p>\\n</li>\\n<li>\\n<p>命令映射，使用<a href=\\\"https://github.com/tj/commander.js\\\">commander</a></p>\\n<blockquote>\\n<p>让文件可以通过命令行的形式执行</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>文件读写，这里我使用的是<a href=\\\"https://github.com/jprichardson/node-fs-extra\\\">fs-extra</a>，使用Node自带的<a href=\\\"https://nodejs.org/api/fs.html\\\">File System</a>，但是前者支持Promise和Async, Await</p>\\n<blockquote>\\n<p>文件读写只是读取模板文件内容，然后写入到新的文件为我们所用</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>模板字符串，使用lodash/string的模板字符串方法<a href=\\\"https://lodash.com/docs/4.17.10#template\\\">template</a></p>\\n<blockquote>\\n<p>模板字符串：我们可以使用xxx.tmpl格式的文件存储我们的模板，需要替换的内容使用</p>\\n<p><code class=\\\"language-text\\\">&lt;%= xxx %&gt;</code>表示即可，下面会给出文件原型</p>\\n</blockquote>\\n</li>\\n<li>\\n<p>文件修改，使用<a href=\\\"https://github.com/dsherret/ts-simple-ast\\\">ts-simple-ast</a></p>\\n<blockquote>\\n<p>文件修改则是直接修改原来文件，加入自己所需的东西，例如修改变量值，这也是这篇文章中提到的较为简单的一个用途，其他更复杂的也可以参考文档学习</p>\\n</blockquote>\\n</li>\\n</ol>\\n<h2 id=\\\"文件原型和需求\\\"><a href=\\\"#%E6%96%87%E4%BB%B6%E5%8E%9F%E5%9E%8B%E5%92%8C%E9%9C%80%E6%B1%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>文件原型和需求</h2>\\n<h3 id=\\\"0-需求\\\"><a href=\\\"#0-%E9%9C%80%E6%B1%82\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>0. 需求</h3>\\n<p>每当新增一个页面，我们需要创建一个基本框架组件，一个Route，最后把这个Route自动插入到总的Router里</p>\\n<h3 id=\\\"1-xxxcomponent\\\"><a href=\\\"#1-xxxcomponent\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>1. xxxComponent</h3>\\n<p>这里创建了一个非常简单的组件，带有Props和State，interface使用Ixxx命名</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\">\\n      <pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> React <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>State <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token keyword\\\">class</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>State<span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">constructor</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">I</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span>Props<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">super</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>state <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h2</span><span class=\\\"token punctuation\\\">></span></span>My Home<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h2</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<h3 id=\\\"2-xxxindex\\\"><a href=\\\"#2-xxxindex\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>2. xxx.index</h3>\\n<p>这个文件里加入所有需要导出的Component，并作为统一导出出口</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">export</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token keyword\\\">as</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> featureUpperName <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./&lt;%= featureUpperName %>'</span></code></pre>\\n      </div>\\n<h3 id=\\\"3-route\\\"><a href=\\\"#3-route\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>3. Route</h3>\\n<p>自定义的Route，属性也基本遵循原生Route，加入loadable component，支持按需加载</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> App <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'../common/component/App'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> IRoute <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'@src/common/routeConfig'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">loader</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token keyword\\\">async</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> entrance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> <span class=\\\"token keyword\\\">import</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> entrance<span class=\\\"token punctuation\\\">[</span>name<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> childRoutes<span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/&lt;%= featureName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'&lt;%= featureUpperName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    loader<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">loader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'&lt;%= featureUpperName %>'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/&lt;%= featureName %>'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">,</span>\\n    component<span class=\\\"token punctuation\\\">:</span> App<span class=\\\"token punctuation\\\">,</span>\\n    childRoutes\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><strong>上面三个便作为基本模板文件，下面这个则是总的Route</strong></p>\\n<h3 id=\\\"4-routeconfig\\\"><a href=\\\"#4-routeconfig\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>4. routeConfig</h3>\\n<blockquote>\\n<p>完成一个页面的创建并生成它的route后，需要在该文件引入这个route，然后修改变量childRoutes，插入该route，这样我们的工作就算完成啦</p>\\n</blockquote>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\">\\n      <pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> HomeRoute <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"../features/home/route\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">IRoute</span> <span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n    component<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> React<span class=\\\"token punctuation\\\">.</span>ComponentClass <span class=\\\"token operator\\\">|</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">SFC</span><span class=\\\"token punctuation\\\">;</span>\\n    childRoutes<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span>\\n    loader<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> AsyncComponentLoader\\n    exact<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">boolean</span>\\n    redirect<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">const</span> childRoutes<span class=\\\"token punctuation\\\">:</span> IRoute<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>HomeRoute<span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">const</span> routes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n    path<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span>\\n    name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'app'</span><span class=\\\"token punctuation\\\">,</span>\\n    exact<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n    redirect<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/home'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token operator\\\">...</span>childRoutes<span class=\\\"token punctuation\\\">]</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> routes<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2 id=\\\"步骤\\\"><a href=\\\"#%E6%AD%A5%E9%AA%A4\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>步骤</h2>\\n<h3 id=\\\"零、源代码\\\"><a href=\\\"#%E9%9B%B6%E3%80%81%E6%BA%90%E4%BB%A3%E7%A0%81\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>零、源代码</h3>\\n<h4 id=\\\"1-kitjs\\\"><a href=\\\"#1-kitjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>1. kit.js</h4>\\n<p><strong>用于读取模板文件，写入新的文件</strong></p>\\n<p>首先第一行，告诉shell此文件默认执行环境为Node</p>\\n<p>接下来我们来看addFeatureItem(忽略我的命名╮(╯▽╰)╭)，这个函数有三个参数</p>\\n<ul>\\n<li>srcPath，template文件位置</li>\\n<li>targetPath，写入的文件位置</li>\\n<li>option，渲染模板时使用，简而言之可以替换掉模板中的变量为里面我们设定的值</li>\\n</ul>\\n<p>我们先确认文件是否存在，然后读取模板文件，写入新的文件即可，中间加了个已有文件判断</p>\\n<p>是不是很简单！</p>\\n<p>最后加入使用commander创建自己的命令即可，更详细的用法可以查看commander的<a href=\\\"https://github.com/tj/commander.js\\\">文档</a>，这里添加一个简单的add命令，后跟一个featureName，键入命令后执行action函数，里面的参数即我们刚刚键入的featureName，读取后便可以从模板创建新的feature</p>\\n<p>当然，我们还需要修改routeConfig.ts这个文件，我将这个操作放到了下面的ts-ast.ts文件</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">#<span class=\\\"token operator\\\">!</span> <span class=\\\"token operator\\\">/</span>usr<span class=\\\"token operator\\\">/</span>bin<span class=\\\"token operator\\\">/</span>env node\\n\\n<span class=\\\"token keyword\\\">const</span> fse <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'fs-extra'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> _ <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/string'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> commander <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'commander'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> ast <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./ts-ast'</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token keyword\\\">const</span> templatesDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'templates'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> targetDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'..'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'src'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'features'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">,</span> targetPath<span class=\\\"token punctuation\\\">,</span> option<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">let</span> res<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">ensureFile</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">)</span>\\n        res <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readFile</span><span class=\\\"token punctuation\\\">(</span>srcPath<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'utf-8'</span><span class=\\\"token punctuation\\\">)</span>\\n        \\n        <span class=\\\"token comment\\\">// avoid override</span>\\n        <span class=\\\"token keyword\\\">const</span> exists <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">pathExists</span><span class=\\\"token punctuation\\\">(</span>targetPath<span class=\\\"token punctuation\\\">)</span>\\n        <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>exists<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetPath<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\"> is already added!`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">return</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token keyword\\\">await</span> fse<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">outputFile</span><span class=\\\"token punctuation\\\">(</span>targetPath<span class=\\\"token punctuation\\\">,</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">template</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span>option<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            encoding<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"utf-8\\\"</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`Add </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>srcPath<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\"> success!`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">err</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">error</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addFeature</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> renderOpt <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n        featureName<span class=\\\"token punctuation\\\">:</span> name<span class=\\\"token punctuation\\\">,</span>\\n        featureUpperName<span class=\\\"token punctuation\\\">:</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> componentTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/Component.tsx.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> component <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>_<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">.tsx`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>componentTmpl<span class=\\\"token punctuation\\\">,</span> component<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> indexTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/index.ts.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> index <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/index.ts`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>indexTmpl<span class=\\\"token punctuation\\\">,</span> index<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">const</span> routeTmpl <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>templatesDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route.ts.tmpl`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> route <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>targetDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>name<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route.ts`</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">addFeatureItem</span><span class=\\\"token punctuation\\\">(</span>routeTmpl<span class=\\\"token punctuation\\\">,</span> route<span class=\\\"token punctuation\\\">,</span> renderOpt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\ncommander\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">version</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'../package.json'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>version<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">command</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'add &lt;feature>'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">action</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// add features</span>\\n        <span class=\\\"token function\\\">addFeature</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// manipulate some ts file like route</span>\\n        <span class=\\\"token function\\\">ast</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n\\ncommander<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">parse</span><span class=\\\"token punctuation\\\">(</span>process<span class=\\\"token punctuation\\\">.</span>argv<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h4 id=\\\"2-ts-astjs\\\"><a href=\\\"#2-ts-astjs\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>2. ts-ast.js</h4>\\n<p><strong>用于修改rootConfig.ts文件</strong></p>\\n<p>先给出ts-simple-ast的<a href=\\\"https://github.com/dsherret/ts-simple-ast\\\">地址</a>，自己还是觉得这个操作是比较复杂的，我也是参考了文档再加上项目脚手架代码才看明白，至于原理性的东西，可能还需要查看<a href=\\\"https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API\\\">Typescript Compiler API</a>，因为这个包也只是Wrapper，文档也还不是很完善，更复杂的需求还有待学习</p>\\n<p>这里关键就两个操作，一个是添加一个import，其次则是修改childRoutes变量的值。但是一些函数的英文字面意思理解起来可能比上面的文件读写要困难</p>\\n<ol>\\n<li>我们首先需要新建一个Project</li>\\n<li>然后需要获取待操作的文件，拿到待操作文件(srcFile)之后，直接使用<em>addImportDeclaration</em>这个方法便可以添加default import，如果需要named import，也可以使用addNamedImport。定义好default name(defaultImport prop)以及path(moduleSpecifier)即可</li>\\n<li>\\n<p>最后是对childRoutes变量的值进行修改，这一过程比较复杂</p>\\n<ul>\\n<li>我们首先需要通过变量名拿到一个VariableStatement</li>\\n<li>然后再拿到变量声明（VariableDeclaration），因为一个文件中可能有多处声明（函数中，全局中）</li>\\n<li>由于该例中只有一处声明，所以我们直接forEach遍历声明即可，遍历时拿到initializer（这里是一个类似array的东东）</li>\\n<li>再使用它的forEachChild遍历拿到node，node.getText终于拿到了里面的一个值（比如HomeRoute）</li>\\n<li>我们将这些值添加到一个新的数组</li>\\n<li>直到遍历完毕，再将它们拼接起来，加入新的route，以字符串形式setInitializer即可</li>\\n</ul>\\n</li>\\n<li>最后保存所有操作，Project.save()即可</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> Project <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'ts-simple-ast'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> _ <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'lodash/string'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> path <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'path'</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token keyword\\\">const</span> project <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Project</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> srcDir <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>__dirname<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'..'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'src'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'common'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">addRoute</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> FeatureName <span class=\\\"token operator\\\">=</span> _<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">upperFirst</span><span class=\\\"token punctuation\\\">(</span>featureName<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">try</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> srcFile <span class=\\\"token operator\\\">=</span> project<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addExistingSourceFile</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>srcDir<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/routeConfig.ts`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    srcFile<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addImportDeclaration</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      defaultImport<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>FeatureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">Route`</span></span><span class=\\\"token punctuation\\\">,</span>\\n      moduleSpecifier<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`../features/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>featureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">/route`</span></span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token keyword\\\">const</span> routeVar <span class=\\\"token operator\\\">=</span> srcFile<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getVariableStatementOrThrow</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'childRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">let</span> newRoutes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    routeVar<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getDeclarations</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>decl<span class=\\\"token punctuation\\\">,</span> i<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n      decl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getInitializer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">forEachChild</span><span class=\\\"token punctuation\\\">(</span>node <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        newRoutes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span>node<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getText</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n      decl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setInitializer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`[</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>newRoutes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">', '</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">, </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>FeatureName<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">Route]`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n\\n    <span class=\\\"token keyword\\\">await</span> project<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">save</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Add route successful\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">catch</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  \\n<span class=\\\"token punctuation\\\">}</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> addRoute<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h3 id=\\\"一、修改文件权限，使其可执行\\\"><a href=\\\"#%E4%B8%80%E3%80%81%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%EF%BC%8C%E4%BD%BF%E5%85%B6%E5%8F%AF%E6%89%A7%E8%A1%8C\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>一、修改文件权限，使其可执行</h3>\\n<p>只要头部加入了<code class=\\\"language-text\\\">#! /usr/bin/env node</code>，简单的一行命令即可搞定<code class=\\\"language-text\\\">chmod +x /filePath/yourExeFile</code></p>\\n<p>然后，我们便可以使用<code class=\\\"language-text\\\">/filePath/yourExeFile add featureName</code>的方式添加一个新的页面！</p>\\n<h2 id=\\\"参考\\\"><a href=\\\"#%E5%8F%82%E8%80%83\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>参考</h2>\\n<ol>\\n<li><a href=\\\"https://askubuntu.com/questions/443789/what-does-chmod-x-filename-do-and-how-do-i-use-it/443799\\\">what-does-chmod-x-filename-do-and-how-do-i-use-it</a></li>\\n</ol>\",\"frontmatter\":{\"title\":\"使用Node工具简化文件创建流程\",\"date\":\"January 27, 2019\",\"excerpt\":\"React中创建组件，添加Redux，添加Route，(或者还需要添加saga)，最后在全局Route和Redux中加入它们，这一系列重复的过程，都可以在Node中创建'脚本'来自动化执行\",\"contents\":[{\"text\":\"背景\",\"subContents\":null},{\"text\":\"所需环境和工具\",\"subContents\":null},{\"text\":\"文件原型和需求\",\"subContents\":[{\"text\":\"0-需求\"},{\"text\":\"1-xxxcomponent\"},{\"text\":\"2-xxxindex\"},{\"text\":\"3-route\"},{\"text\":\"4-routeconfig\"}]},{\"text\":\"步骤\",\"subContents\":[{\"text\":\"零、源代码\"},{\"text\":\"一、修改文件权限，使其可执行\"}]},{\"text\":\"参考\",\"subContents\":null}]}}},\"pathContext\":{\"slug\":\"/learning/2019/01/27/Simplify-the-File-Creation-in-NodeJS/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/learning-2019-01-27-simplify-the-file-creation-in-node-js.json\n// module id = 287\n// module chunks = 236278375703133"],"sourceRoot":""}